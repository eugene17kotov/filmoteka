{"mappings":"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","sources":["src/js/search.js","src/js/pagination.js","src/js/render-movie-cards.js","src/js/genres.json","src/js/create-movie-markup.js","src/js/filter.js","src/js/debounce.js"],"sourcesContent":["import { API_KEY, SEARCH_URL, BASE_URL } from './api/api-vars';\nimport { getMovies } from './api/fetch-movie.js';\nimport { renderPagination, paginationWrapRef } from './pagination';\nimport { renderMovieCards } from './render-movie-cards';\nimport { filter, toTrendingBtn, toTrendingBtnClick } from './filter';\nimport { debounce } from './debounce';\nimport { startLoader, stopLoader } from './loader';\nimport { hideSlider, showSlider } from './slider';\n\nconst refs = {\n  form: document.querySelector('.header__form'),\n  input: document.querySelector('.header__form-input'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.backdrop-loader'),\n  failSearchText: document.querySelector('.not-succesful-search-text'),\n};\n\nexport function searchMovies(searchText) {\n  const searchUrl = `${SEARCH_URL}&query=${searchText}`;\n  localStorage.setItem('LAST_REQUESTED_URL', searchUrl);\n  return getMovies(searchUrl);\n}\n\nlet searchText = '';\n\n// Search by submit\n\nexport async function onFormSubmit(e) {\n  e.preventDefault();\n\n  searchText = e.currentTarget.query.value.trim();\n\n  if (searchText === '') {\n    return;\n  }\n\n  paginationWrapRef.classList.add('visually-hidden');\n\n  setTimeout(() => { e.target.reset(); }, 700);\n\n  filter.classList.add('is-hidden');\n  toTrendingBtn.classList.remove('is-hidden');\n\n  hideSlider();\n\n  clearGallery();\n\n  startLoader();\n\n  const movie = await searchMovies(searchText);\n\n  if (!movie.total_results) {\n    refs.failSearchText.classList.remove('visually-hidden');\n    stopLoader();\n    return;\n  }\n\n  renderMovieCards(movie.results);\n  renderPagination(movie.page, movie.total_pages);\n  paginationWrapRef.classList.remove('visually-hidden');\n  stopLoader();\n}\n\nfunction clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\n// Search by input\n\nconst DEBOUNCE_DELAY = 700;\n\nrefs.form && refs.form.addEventListener('submit', onFormSubmit);\nrefs.input &&\n  refs.input.addEventListener('input', debounce(onInputText, DEBOUNCE_DELAY));\n\nasync function onInputText(e) {\n  searchText = e.target.value.trim();\n  hideSlider();\n  if (searchText === '') {\n    toTrendingBtnClick();\n    return;\n  }\n  paginationWrapRef.classList.add('visually-hidden');\n\n  startLoader();\n\n  filter.classList.add('is-hidden');\n  toTrendingBtn.classList.remove('is-hidden');\n  refs.failSearchText.classList.add('visually-hidden');\n\n  clearGallery();\n\n  const movie = await searchMovies(searchText);\n\n  if (!movie.total_results) {\n    paginationWrapRef.classList.add('visually-hidden');\n    refs.failSearchText.classList.remove('visually-hidden');\n    stopLoader(); \n    return;\n  }\n\n  renderMovieCards(movie.results);\n  renderPagination(movie.page, movie.total_pages);\n  paginationWrapRef.classList.remove('visually-hidden');\n  stopLoader();\n}\n","import { getMovies } from './api/fetch-movie';\nimport { renderMovieCards } from './render-movie-cards';\nimport { topFunction } from './scroll-up';\nimport { startLoader, stopLoader } from './loader';\nimport { adRandomizer } from './render-movie-cards';\n\nexport const paginationWrapRef = document.querySelector('.pagination-wrap');\n\nexport function renderPagination(currentPage, totalPages) {\n  let buttons = [];\n\n  if (currentPage > 1) {\n    buttons.push(createButton(currentPage - 1, true, 'arrow-left'));\n  }\n\n  if (currentPage >= 4) {\n    buttons.push(createButton(1, true, 'first-button'));\n  }\n\n  if (currentPage >= 5) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage >= 2) {\n    if (currentPage >= 3) {\n      buttons.push(createButton(currentPage - 2));\n    }\n    buttons.push(createButton(currentPage - 1));\n  }\n\n  buttons.push(createButton(currentPage, false));\n\n  if (currentPage <= totalPages - 1) {\n    buttons.push(createButton(currentPage + 1));\n    if (currentPage <= totalPages - 2) {\n      buttons.push(createButton(currentPage + 2));\n    }\n  }\n\n  if (currentPage < totalPages - 3) {\n    buttons.push(createDotsEl());\n  }\n\n  if (currentPage <= totalPages - 3) {\n    buttons.push(createButton(totalPages, true, 'last-button'));\n  }\n\n  if (currentPage < totalPages) {\n    buttons.push(createButton(currentPage + 1, true, 'arrow-right'));\n  }\n\n  paginationWrapRef.innerHTML = '';\n\n  buttons.forEach(button => paginationWrapRef.append(button));\n}\n\nfunction createBaseButton() {\n  const baseButton = document.createElement('button');\n  baseButton.classList.add('pagination-button');\n  return baseButton;\n}\n\nfunction createDotsEl() {\n  const newDotsEl = document.createElement('span');\n  newDotsEl.innerHTML = `<span class=\"dots\">...</span>`;\n  return newDotsEl;\n}\n\nfunction createButton(\n  pageNum,\n  isButtonClickable = true,\n  additionalClass = null\n) {\n  const newButton = createBaseButton();\n  newButton.dataset['page'] = pageNum;\n  newButton.textContent =\n    additionalClass && additionalClass.includes('arrow') ? '' : pageNum;\n\n  if (additionalClass) {\n    newButton.classList.add(additionalClass);\n  }\n\n  if (isButtonClickable) {\n    newButton.addEventListener('click', pageButtonPressed);\n  } else {\n    newButton.classList.add('pagination-button--current');\n  }\n\n  return newButton;\n}\n\nasync function pageButtonPressed(event) {\n  const page = event.target.dataset.page;\n  const lastUrl = localStorage.getItem('LAST_REQUESTED_URL');\n  const newUrl = `${lastUrl}&page=${page}`;\n\n  startLoader();\n  topFunction();\n\n  await getMovies(newUrl).then(response => {\n    renderMovieCards(response.results);\n    adRandomizer();\n    renderPagination(response.page, response.total_pages);\n  });\n\n  stopLoader();\n}\n","import { getMovies } from './api/fetch-movie';\nimport { createMovieMarkup } from './create-movie-markup';\nimport { TREND_DAY_URL } from './api/api-vars';\nimport { renderPagination } from './pagination.js';\nimport { startLoader, stopLoader } from './loader';\n\nconst gallery = document.querySelector('.gallery');\n\nstartLoader();\n\n(async () => {\n  const trendMoviesList = await getMovies(TREND_DAY_URL);\n\n  await renderMovieCards(trendMoviesList.results);\n\n  addAd();\n\n  stopLoader();\n\n  localStorage.setItem('LAST_REQUESTED_URL', TREND_DAY_URL);\n  renderPagination(trendMoviesList.page, trendMoviesList.total_pages);\n})();\n\nexport function renderMovieCards(movies) {\n  const movieGalleryMarkup = movies\n    .map(movie => createMovieMarkup(movie))\n    .join('');\n\n  gallery && appendMarkup();\n\n  function appendMarkup() {\n    gallery.innerHTML = movieGalleryMarkup;\n  }\n}\n\nexport function addAd() {\n  const adCard = `<li class=\"ad-card\">\n            <a class=\"gallery__link ad-card-link\" href=\"#\">\n              <div class=\"gallery__image ad-card-content-wrapper\">\n                <p class=\"ad-title\">Здесь может быть ваша реклама</p>\n                <div class=\"ad-content\">\n                  <p class=\"ad-text\">Продам гараж</br>Недорого</p>\n                  <p class=\"ad-number\">066-222-33-44</br>Саша Репета</p>\n                </div>\n              </div>\n            </a>\n          </li>`;\n\n  document.querySelector('.gallery').insertAdjacentHTML('beforeEnd', adCard);\n}\n\nexport function addAdCar() {\n  const adCard = `<li class=\"ad-card\">\n            <a class=\"gallery__link ad-card-link\" href=\"#\">\n              <div class=\"gallery__image ad-card-content-wrapper\">\n                <p class=\"ad-title\">Здесь может быть ваша реклама</p>\n                <div class=\"ad-content\">\n                  <p class=\"ad-text\">Продам BMW X5</br>Не бита</br>Не крашена</p>\n                  <p class=\"ad-number\">066-222-33-44</br>Саша Репета</p>\n                </div>\n              </div>\n            </a>\n          </li>`;\n\n  document.querySelector('.gallery').insertAdjacentHTML('beforeEnd', adCard);\n}\n\nexport function adRandomizer() {\n  const random = Math.random() * (10 - 1) + 1;\n  if (random >= 5) {\n    addAd();\n  } else {\n    addAdCar();\n  }\n}\n","{\n  \"genres\": [\n    { \"id\": 28, \"name\": \"Action\" },\n    { \"id\": 12, \"name\": \"Adventure\" },\n    { \"id\": 16, \"name\": \"Animation\" },\n    { \"id\": 35, \"name\": \"Comedy\" },\n    { \"id\": 80, \"name\": \"Crime\" },\n    { \"id\": 99, \"name\": \"Documentary\" },\n    { \"id\": 18, \"name\": \"Drama\" },\n    { \"id\": 10751, \"name\": \"Family\" },\n    { \"id\": 14, \"name\": \"Fantasy\" },\n    { \"id\": 36, \"name\": \"History\" },\n    { \"id\": 27, \"name\": \"Horror\" },\n    { \"id\": 10402, \"name\": \"Music\" },\n    { \"id\": 9648, \"name\": \"Mystery\" },\n    { \"id\": 10749, \"name\": \"Romance\" },\n    { \"id\": 878, \"name\": \"Science Fiction\" },\n    { \"id\": 10770, \"name\": \"TV Movie\" },\n    { \"id\": 53, \"name\": \"Thriller\" },\n    { \"id\": 10752, \"name\": \"War\" },\n    { \"id\": 37, \"name\": \"Western\" }\n  ]\n}","import { genres } from './genres.json';\nimport { BASE_IMG_URL } from './api/api-vars';\n\nexport function createMovieMarkup(movie) {\n  const { title, genre_ids, release_date, poster_path, id } = movie;\n\n  let year = '';\n  if (typeof release_date !== 'undefined' && release_date.length > 4) {\n    year = release_date.slice(0, 4);\n  }\n\n  const movieGenresList = getMovieGenresList(genre_ids).join(', ');\n\n  if (poster_path === null) {\n    return `<li>\n            <a class=\"gallery__link\" href=\"#\">\n              <img class=\"gallery__image\" data-id=\"${id}\" src=\"https://dummyimage.com/395x574/000/fff.jpg&text=no+poster\" alt=\"${title} movie poster\" loading=\"lazy\">\n            \n            <div class=\"info\">\n              <p class=\"info__item\">${title}</p>\n              <div class=\"info-detail\">\n                <p class=\"info-detail__item\">${movieGenresList}</p>\n                <p class=\"info-detail__item\">${year}</p>\n              </div>\n            </div>\n            </a>\n          </li>`;\n  }\n\n  return `<li>\n            <a class=\"gallery__link\" href=\"#\">\n              <img class=\"gallery__image\" data-id=\"${id}\" src=\"${BASE_IMG_URL}${poster_path}\" alt=\"${title} movie poster\" loading=\"lazy\">\n            \n            <div class=\"info\">\n              <h3 class=\"info__item\">${title}</h3>\n              <div class=\"info-detail\">\n                <p class=\"info-detail__item\">${movieGenresList}</p>\n                <p class=\"info-detail__item\">${year}</p>\n              </div>\n            </div>\n            </a>\n          </li>`;\n}\n\nexport function getMovieGenresList(genresIdsList) {\n  let movieGenres = genres.reduce((acc, { id, name }) => {\n    if (genresIdsList.includes(id)) {\n      acc.push(name);\n    }\n    return acc;\n  }, []);\n  if (movieGenres.length > 3) {\n    movieGenres = movieGenres.slice(0, 2);\n    movieGenres.push('Other');\n  }\n  return movieGenres;\n}\n","import { renderMovieCards } from './render-movie-cards';\nimport { getMovies } from './api/fetch-movie';\nimport { API_KEY, BASE_URL } from './api/api-vars';\nimport { paginationWrapRef } from './pagination';\nimport { startLoader, stopLoader } from './loader';\nimport { adRandomizer } from './render-movie-cards';\nimport { showSlider } from './slider';\n\nconst refs = {\n  btnToday: document.querySelector('button[data-group=\"today\"]'),\n  filterBg: document.querySelector('.background__filter'),\n  btnWeek: document.querySelector('button[data-group=\"week\"]'),\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.header__form'),\n  filter: document.querySelector('.filter'),\n  toTrendingBtn: document.querySelector('.to-trending__button'),\n  failSearchText: document.querySelector('.not-succesful-search-text'),\n};\n\nexport const {\n  btnToday,\n  filterBg,\n  btnWeek,\n  gallery,\n  form,\n  filter,\n  toTrendingBtn,\n  failSearchText,\n} = refs;\nlet anchorNodeToday = btnToday.parentNode.parentNode;\nlet anchorNodeWeek = btnWeek.parentNode.parentNode;\n\nlet page = 1;\n\ntoTrendingBtn.addEventListener('click', toTrendingBtnClick);\n\nbtnToday.addEventListener('click', async () => {\n  page = document.querySelector('.pagination-button--current').dataset.page;\n  const TREND_URL_DAY = `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`;\n  if (anchorNodeToday.classList.contains('.selected')) {\n    return;\n  } else {\n    startLoader();\n    anchorNodeToday.classList.add('selected');\n    anchorNodeWeek.classList.remove('selected');\n    filterBg.classList.remove('to-right');\n    localStorage.setItem('LAST_REQUESTED_URL', TREND_URL_DAY);\n    await renderMovies(TREND_URL_DAY + `&page=${page}`);\n    setTimeout(() => {\n      stopLoader();\n    }, 200);\n  }\n});\n\nbtnWeek.addEventListener('click', async () => {\n  page = document.querySelector('.pagination-button--current').dataset.page;\n  const TREND_URL_WEEK = `${BASE_URL}/trending/movie/week?api_key=${API_KEY}`;\n  if (anchorNodeWeek.classList.contains('.selected')) {\n    return;\n  } else {\n    startLoader();\n    anchorNodeToday.classList.remove('selected');\n    anchorNodeWeek.classList.add('selected');\n    filterBg.classList.add('to-right');\n    localStorage.setItem('LAST_REQUESTED_URL', TREND_URL_WEEK);\n    await renderMovies(TREND_URL_WEEK + `&page=${page}`);\n    setTimeout(() => {\n      stopLoader();\n    }, 200);\n  }\n});\n\nexport function renderMovies(url) {\n  getMovies(url).then(response => {\n    renderMovieCards(response.results);\n\n    adRandomizer();\n  });\n}\n\nexport async function toTrendingBtnClick() {\n  page = document.querySelector('.pagination-button--current').dataset.page;\n\n  const TREND_URL_DAY = `${BASE_URL}/trending/movie/day?api_key=${API_KEY}`;\n\n  showSlider();\n  filter.classList.remove('is-hidden');\n  toTrendingBtn.classList.add('is-hidden');\n  form.reset();\n\n  if (anchorNodeWeek.classList.contains('.selected')) {\n    return;\n  } else {\n    startLoader();\n    anchorNodeWeek.classList.remove('selected');\n    anchorNodeToday.classList.add('selected');\n    filterBg.classList.remove('to-right');\n    localStorage.setItem('LAST_REQUESTED_URL', TREND_URL_DAY);\n    await renderMovies(TREND_URL_DAY + `&page=${page}`);\n    paginationWrapRef.classList.remove('visually-hidden');\n    failSearchText.classList.add('visually-hidden');\n    setTimeout(() => {\n      stopLoader();\n    }, 200);\n  }\n}\n","export function debounce(func, wait, options) {\n  let lastArgs,\n    lastThis,\n    maxWait,\n    result,\n    timerId,\n    lastCallTime,\n    lastInvokeTime = 0,\n    leading = false,\n    maxing = false,\n    trailing = true;\n  if (typeof func !== 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = Number(wait) || 0;\n  if (typeof options === 'object') {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(Number(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    let args = lastArgs,\n      thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    lastInvokeTime = time;\n    timerId = setTimeout(timerExpired, wait);\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    let timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime,\n      result = wait - timeSinceLastCall;\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    let timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime;\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= wait ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    );\n  }\n\n  function timerExpired() {\n    const time = Date.now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(Date.now());\n  }\n\n  function debounced() {\n    let time = Date.now(),\n      isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n"],"names":["$iUA6h","parcelRequire","$4g74k","$0b1f61b1d1b5471b$exports","JSON","parse","$5229c947073b6fa9$export$8a980da361a674f","movie","title","genre_ids","release_date","poster_path","id","year","length","slice","movieGenresList","genresIdsList","movieGenres","genres","reduce","acc","name","includes","push","$5229c947073b6fa9$export$e06660f04e0d4ab0","join","BASE_IMG_URL","$c2ae52fb08368790$var$gallery","document","querySelector","$c2ae52fb08368790$export$bc472845f7b7844b","movies","movieGalleryMarkup","map","innerHTML","$c2ae52fb08368790$export$4dbb76ef90d3dbc4","insertAdjacentHTML","$c2ae52fb08368790$export$1d84fcb835b2f210","Math","random","$kvC6y","startLoader","trendMoviesList","getMovies","TREND_DAY_URL","results","stopLoader","localStorage","setItem","$dfaf77c789ce7a24$export$825408fbca4f2040","page","total_pages","$dfaf77c789ce7a24$export$f1808d22cd0973ab","currentPage","totalPages","buttons","$dfaf77c789ce7a24$var$createButton","$dfaf77c789ce7a24$var$createDotsEl","forEach","button","append","newDotsEl","createElement","pageNum","isButtonClickable","additionalClass","newButton","baseButton","classList","add","$dfaf77c789ce7a24$var$createBaseButton","dataset","textContent","addEventListener","$dfaf77c789ce7a24$var$pageButtonPressed","async","event","target","newUrl","getItem","$23Ajj","topFunction","then","response","$6142fea1849c7fbd$var$refs","btnToday","filterBg","btnWeek","gallery","form","filter","toTrendingBtn","failSearchText","$6142fea1849c7fbd$export$97ff2b3fc67ac431","$6142fea1849c7fbd$export$c8a705d84b3aa380","$6142fea1849c7fbd$export$c0fb77532349e8a4","$6142fea1849c7fbd$export$b21c1b4271bdbe93","$6142fea1849c7fbd$export$6210fa4921d2a466","$6142fea1849c7fbd$export$3dea766d36a8935f","$6142fea1849c7fbd$export$16b30f7ddc7bd7c9","$6142fea1849c7fbd$export$5932c8d8532e170e","$6142fea1849c7fbd$var$anchorNodeToday","parentNode","$6142fea1849c7fbd$var$anchorNodeWeek","$6142fea1849c7fbd$var$page","$6142fea1849c7fbd$export$1a30573fde3dfc62","url","$6142fea1849c7fbd$export$517aecebd478404c","TREND_URL_DAY","BASE_URL","API_KEY","$8Veln","showSlider","remove","reset","contains","setTimeout","TREND_URL_WEEK","$d35904b1c7f1c41e$var$refs","input","loader","$d35904b1c7f1c41e$export$b0c4d3ac9887d994","searchText1","searchUrl","SEARCH_URL","$d35904b1c7f1c41e$var$searchText","$d35904b1c7f1c41e$var$clearGallery","e","preventDefault","currentTarget","query","value","trim","hideSlider","total_results","func","wait","options","lastArgs","lastThis","maxWait","result1","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","FUNC_ERROR_TEXT","invokeFunc","time","args","thisArg","undefined","apply","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","Date","now","trailingEdge","result","nativeMin","remainingWait","debounced","isInvoking","arguments","this","Number","nativeMax","cancel","clearTimeout","flush"],"version":3,"file":"index.1f9439dd.js.map"}